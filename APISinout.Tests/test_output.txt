  Determinando os projetos a serem restaurados...
  Todos os projetos estão atualizados para restauração.
  APISinout -> C:\Users\Eduar\Downloads\PROA\sinout-back\bin\Debug\net8.0\APISinout.dll
  APISinout.Tests -> C:\Users\Eduar\Downloads\PROA\sinout-back\APISinout.Tests\bin\Debug\net8.0\APISinout.Tests.dll
Execução de teste para C:\Users\Eduar\Downloads\PROA\sinout-back\APISinout.Tests\bin\Debug\net8.0\APISinout.Tests.dll (.NETCoreApp,Version=v8.0)
Versão do VSTest 18.0.1 (x64)

Iniciando execução de teste, espere...
1 arquivos de teste no total corresponderam ao padrão especificado.
  Com falha APISinout.Tests.Unit.Controllers.AuthControllerTests.GetCurrentUser_WithAuthenticatedUser_ShouldReturnUserInfo [5 ms]
  Mensagem de erro:
   Assert.IsType() Failure: Value is not the exact type
Expected: typeof(APISinout.Models.User)
Actual:   typeof(<>f__AnonymousType1<int, string, string, string, string>)
  Rastreamento de pilha:
     at APISinout.Tests.Unit.Controllers.AuthControllerTests.GetCurrentUser_WithAuthenticatedUser_ShouldReturnUserInfo() in C:\Users\Eduar\Downloads\PROA\sinout-back\APISinout.Tests\Unit\Controllers\AuthControllerTests.cs:line 288
--- End of stack trace from previous location ---
  Com falha APISinout.Tests.Unit.Controllers.HistoryControllerTests.GetMyHistory_WithValidUser_ShouldReturnUserHistory [195 ms]
  Mensagem de erro:
   Expected responseHistory.All(h => h.PatientId == 2) to be True, but found False.
  Rastreamento de pilha:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
   at APISinout.Tests.Unit.Controllers.HistoryControllerTests.GetMyHistory_WithValidUser_ShouldReturnUserHistory() in C:\Users\Eduar\Downloads\PROA\sinout-back\APISinout.Tests\Unit\Controllers\HistoryControllerTests.cs:line 135
--- End of stack trace from previous location ---
[xUnit.net 00:00:00.75]     APISinout.Tests.Unit.Services.EmailServiceTests.SendPasswordResetEmailAsync_WithValidEmail_ShouldLogInformation [SKIP]
  Ignorado APISinout.Tests.Unit.Services.EmailServiceTests.SendPasswordResetEmailAsync_WithValidEmail_ShouldLogInformation [1 ms]
  Com falha APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetMyStatistics_WithCustomHours_ShouldReturn200OK [1 s]
  Mensagem de erro:
   Expected response.StatusCode to be HttpStatusCode.OK {value: 200}, but found HttpStatusCode.NotFound {value: 404}.
  Rastreamento de pilha:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetMyStatistics_WithCustomHours_ShouldReturn200OK() in C:\Users\Eduar\Downloads\PROA\sinout-back\APISinout.Tests\Integration\Controllers\HistoryControllerIntegrationTests.cs:line 259
--- End of stack trace from previous location ---
  Com falha APISinout.Tests.Integration.Controllers.UserControllerIntegrationTests.UpdatePatientName_WithValidData_ShouldReturn200OK [1 s]
  Mensagem de erro:
   Expected response.StatusCode to be HttpStatusCode.OK {value: 200}, but found HttpStatusCode.MethodNotAllowed {value: 405}.
  Rastreamento de pilha:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at APISinout.Tests.Integration.Controllers.UserControllerIntegrationTests.UpdatePatientName_WithValidData_ShouldReturn200OK() in C:\Users\Eduar\Downloads\PROA\sinout-back\APISinout.Tests\Integration\Controllers\UserControllerIntegrationTests.cs:line 142
--- End of stack trace from previous location ---
  Com falha APISinout.Tests.Integration.Controllers.UserControllerIntegrationTests.UpdatePatientName_WithoutAuth_ShouldReturn401Unauthorized [174 ms]
  Mensagem de erro:
   Expected response.StatusCode to be HttpStatusCode.Unauthorized {value: 401}, but found HttpStatusCode.MethodNotAllowed {value: 405}.
  Rastreamento de pilha:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at APISinout.Tests.Integration.Controllers.UserControllerIntegrationTests.UpdatePatientName_WithoutAuth_ShouldReturn401Unauthorized() in C:\Users\Eduar\Downloads\PROA\sinout-back\APISinout.Tests\Integration\Controllers\UserControllerIntegrationTests.cs:line 160
--- End of stack trace from previous location ---
  Com falha APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetUserStatistics_AsOwner_ShouldReturn200OK [525 ms]
  Mensagem de erro:
   Expected response.StatusCode to be HttpStatusCode.OK {value: 200}, but found HttpStatusCode.NotFound {value: 404}.
  Rastreamento de pilha:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetUserStatistics_AsOwner_ShouldReturn200OK() in C:\Users\Eduar\Downloads\PROA\sinout-back\APISinout.Tests\Integration\Controllers\HistoryControllerIntegrationTests.cs:line 323
--- End of stack trace from previous location ---
[xUnit.net 00:00:03.14]     APISinout.Tests.Unit.Services.EmailServiceTests.SendPasswordResetEmailAsync_WithoutCredentials_ShouldLogAndReturnWithoutError [SKIP]
  Ignorado APISinout.Tests.Unit.Services.EmailServiceTests.SendPasswordResetEmailAsync_WithoutCredentials_ShouldLogAndReturnWithoutError [1 ms]
  Com falha APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetMyHistory_WithCustomHours_ShouldReturn400BadRequest [438 ms]
  Mensagem de erro:
   Expected response.StatusCode to be HttpStatusCode.BadRequest {value: 400}, but found HttpStatusCode.OK {value: 200}.
  Rastreamento de pilha:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetMyHistory_WithCustomHours_ShouldReturn400BadRequest() in C:\Users\Eduar\Downloads\PROA\sinout-back\APISinout.Tests\Integration\Controllers\HistoryControllerIntegrationTests.cs:line 139
--- End of stack trace from previous location ---
  Com falha APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetHistoryByUser_AsNonOwner_ShouldReturn400BadRequest [774 ms]
  Mensagem de erro:
   Expected response.StatusCode to be HttpStatusCode.BadRequest {value: 400}, but found HttpStatusCode.NotFound {value: 404}.
  Rastreamento de pilha:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetHistoryByUser_AsNonOwner_ShouldReturn400BadRequest() in C:\Users\Eduar\Downloads\PROA\sinout-back\APISinout.Tests\Integration\Controllers\HistoryControllerIntegrationTests.cs:line 197
--- End of stack trace from previous location ---
  Com falha APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetMyHistory_WithCustomHours_ShouldReturn404NotFound [354 ms]
  Mensagem de erro:
   Expected response.StatusCode to be HttpStatusCode.NotFound {value: 404}, but found HttpStatusCode.OK {value: 200}.
  Rastreamento de pilha:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetMyHistory_WithCustomHours_ShouldReturn404NotFound() in C:\Users\Eduar\Downloads\PROA\sinout-back\APISinout.Tests\Integration\Controllers\HistoryControllerIntegrationTests.cs:line 153
--- End of stack trace from previous location ---
  Com falha APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetMyStatistics_WithoutAuth_ShouldReturn401Unauthorized [2 ms]
  Mensagem de erro:
   Expected response.StatusCode to be HttpStatusCode.Unauthorized {value: 401}, but found HttpStatusCode.NotFound {value: 404}.
  Rastreamento de pilha:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetMyStatistics_WithoutAuth_ShouldReturn401Unauthorized() in C:\Users\Eduar\Downloads\PROA\sinout-back\APISinout.Tests\Integration\Controllers\HistoryControllerIntegrationTests.cs:line 234
--- End of stack trace from previous location ---
  Com falha APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetMyStatistics_WithValidToken_ShouldReturn200OK [413 ms]
  Mensagem de erro:
   Expected response.StatusCode to be HttpStatusCode.OK {value: 200}, but found HttpStatusCode.NotFound {value: 404}.
  Rastreamento de pilha:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetMyStatistics_WithValidToken_ShouldReturn200OK() in C:\Users\Eduar\Downloads\PROA\sinout-back\APISinout.Tests\Integration\Controllers\HistoryControllerIntegrationTests.cs:line 222
--- End of stack trace from previous location ---
  Com falha APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetHistoryByUser_AsOwner_ShouldReturn200OK [261 ms]
  Mensagem de erro:
   Expected response.StatusCode to be HttpStatusCode.OK {value: 200}, but found HttpStatusCode.NotFound {value: 404}.
  Rastreamento de pilha:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetHistoryByUser_AsOwner_ShouldReturn200OK() in C:\Users\Eduar\Downloads\PROA\sinout-back\APISinout.Tests\Integration\Controllers\HistoryControllerIntegrationTests.cs:line 178
--- End of stack trace from previous location ---
  Com falha APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetUserStatistics_AsNonOwner_ShouldReturn400BadRequest [508 ms]
  Mensagem de erro:
   Expected response.StatusCode to be HttpStatusCode.BadRequest {value: 400}, but found HttpStatusCode.NotFound {value: 404}.
  Rastreamento de pilha:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetUserStatistics_AsNonOwner_ShouldReturn400BadRequest() in C:\Users\Eduar\Downloads\PROA\sinout-back\APISinout.Tests\Integration\Controllers\HistoryControllerIntegrationTests.cs:line 344
--- End of stack trace from previous location ---
  Com falha APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetMyStatistics_WithCustomHours_ShouldReturn400BadRequest [254 ms]
  Mensagem de erro:
   Expected response.StatusCode to be HttpStatusCode.BadRequest {value: 400}, but found HttpStatusCode.NotFound {value: 404}.
  Rastreamento de pilha:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at APISinout.Tests.Integration.Controllers.HistoryControllerIntegrationTests.GetMyStatistics_WithCustomHours_ShouldReturn400BadRequest() in C:\Users\Eduar\Downloads\PROA\sinout-back\APISinout.Tests\Integration\Controllers\HistoryControllerIntegrationTests.cs:line 285
--- End of stack trace from previous location ---

Com falha! – Com falha:    14, Aprovado:   348, Ignorado:     2, Total:   364, Duração: 8 s - APISinout.Tests.dll (net8.0)
